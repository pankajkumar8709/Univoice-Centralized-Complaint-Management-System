<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>View Teacher Complaints</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      background-color: #f4f4f4;
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      padding: 15px 30px;
      background-color: #2c3e50;
      color: white;
    }

    .navbar .btn-group button,
    .navbar a button {
      padding: 10px 15px;
      margin: 0 5px;
      background-color: #3498db;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .navbar .btn-group button:hover,
    .navbar a button:hover {
      background-color: #2980b9;
    }

    .view-buttons {
      display: flex;
      justify-content: center;
      margin: 20px;
    }

    .view-btn {
      background-color: #34495e;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 5px;
      margin: 0 10px;
      cursor: pointer;
      font-size: 16px;
    }

    .view-btn:hover {
      background-color: #2c3e50;
    }

    .container {
      display: none;
      padding: 20px;
      background-color: #fff;
      margin: 20px auto;
      border-radius: 8px;
      width: 90%;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h2 {
      margin-top: 0;
      color: #2c3e50;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }

    table th,
    table td {
      border: 1px solid #ddd;
      padding: 12px 15px;
      text-align: left;
    }

    table th {
      background-color: #2c3e50;
      color: white;
    }

    table tr:nth-child(even) {
      background-color: #f2f2f2;
    }

    table tr:hover {
      background-color: #e0e0e0;
    }
  </style>
</head>
<body>

<div class="navbar">
  <div class="btn-group">
    <a href="/off_view_complaints"><button><i class="fas fa-arrow-left"></i> Back to Dashboard</button></a>
    <a href="/view_teacher_complaints"><button><i class="fas fa-sync-alt"></i> Refresh</button></a>
  </div>
  <a href="/logout"><button><i class="fas fa-sign-out-alt"></i> Logout</button></a>
</div>

<div class="view-buttons">
  <button class="view-btn complaints" onclick="showSection('complaints')">
    <i class="fas fa-exclamation-circle"></i> View Complaints
  </button>
  <button class="view-btn suggestions" onclick="showSection('suggestions')">
    <i class="fas fa-lightbulb"></i> View Suggestions
  </button>
  <button class="view-btn anonymous" onclick="showSection('anonymous')">
    <i class="fas fa-user-secret"></i> View Anonymous
  </button>
</div>

<div class="container" id="complaints-container">
  <h2>Registered Complaints</h2>
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Title</th>
        <th>Description</th>
        <th>Category</th>
        <th>Date</th>
        <th>Others</th>
      </tr>
    </thead>
    <tbody>
      <!-- Dynamically populated using Flask -->
      {% if complaints %}
        {% for complaint in complaints %}
        <tr>
          <td>{{ complaint.id }}</td>
          <td>{{ complaint.title }}</td>
          <td>{{ complaint.complaint }}</td>
          <td>{{ complaint.category }}</td>
          <td>{{ complaint.date }}</td>
          <td>{{ complaint.others }}</td>
        </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="6" style="text-align: center;">No complaints registered.</td></tr>
      {% endif %}
    </tbody>
  </table>
</div>

<div class="container" id="suggestions-container">
  <h2>Registered Suggestions</h2>
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Title</th>
        <th>Category</th>
        <th>Description</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      {% if suggest %}
        {% for complaint in suggest %}
        <tr>
          <td>{{ complaint.id }}</td>
          <td>{{ complaint.title }}</td>
          <td>{{ complaint.category }}</td>
          <td>{{ complaint.complaint }}</td>
          <td>{{ complaint.date }}</td>
        </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="5" style="text-align: center;">No suggestions registered.</td></tr>
      {% endif %}
    </tbody>
  </table>
</div>

<div class="container" id="anonymous-container">
  <h2>Registered Anonymous Complaints</h2>
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Title</th>
        <th>Category</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      {% if anonymous %}
        {% for complaint in anonymous %}
        <tr>
          <td>{{ complaint.id }}</td>
          <td>{{ complaint.title }}</td>
          <td>{{ complaint.category }}</td>
          <td>{{ complaint.complaint }}</td>
        </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="4" style="text-align: center;">No anonymous complaints registered.</td></tr>
      {% endif %}
    </tbody>
  </table>
</div>

<script>
  document.querySelectorAll('.container').forEach(container => {
    container.style.display = 'none';
  });

  function showSection(sectionType) {
    document.querySelectorAll('.container').forEach(container => {
      container.style.display = 'none';
    });

    const container = document.getElementById(`${sectionType}-container`);
    if (container) {
      container.style.display = 'block';
      container.scrollIntoView({ behavior: 'smooth' });
    }
  }

  window.onload = function() {
    showSection('complaints');
  };
</script>
</body>
</html>
